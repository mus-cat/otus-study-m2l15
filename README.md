# Ansible
## Задание выполнялось с использованием VirtualBox 6.1.40, использовался vagrant с box-образом generic/debian10 (debian 10.13)
## Задание

Подготовить стенд на Vagrant как минимум с одним сервером. На этом сервере используя Ansible необходимо развернуть nginx со следующими условиями:
- необходимо использовать модуль yum/apt;
- конфигурационные файлы должны быть взяты из шаблона jinja2 с перемененными;
- после установки nginx должен быть в режиме enabled в systemd;
- должен быть использован notify для старта nginx после установки;
- сайт должен слушать на нестандартном порту - 8080, для этого использовать переменные в Ansible.

В процессе выполнения задания подготовлены:
- Файлы роли `alt_port_nginx` (размещается в папке папке **roles**). В роль включены сама роль (**tasks/main.yml**), обработчик (**handler/main.yml**) и шаблон (**templates/nginx.default.j2**) конфигурационного файла для nginx. Шаблон для настройки порта использует переменную `nginx_http_port`.
- Файл playbook - **nginx.yml**. Содержит ряд настроек и вызов роли `alt_port_nginx`. Номер порта на котором должен слушать nginx извлекается из переменной `alt_http_port` хоста и передается в роль.
- Файл **hosts.yml** содержит параметры подключения к удаленному хосту (исходно для подключения используется адрес 127.0.0.1:8080) и дополнительный параметр `alt_http_port`, значение которого передается шаблону.

Настрока ВМ осуществляется командой
```
ansible-playbook -i hosts.yml nginx.yml
```
